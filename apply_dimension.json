{
    "id": "apply_dimension",
    "summary": "Applies an n-ary process to one or more dimensions",
    "description": "Applies an n-ary process (i.e. takes an array of values instead of a single value) to a raster data cube. The n-ary process must return as many elements in the returned array as there are in the input array.\n\nThe dimensions over which to iterate with the parameter `dimensions` can be specified. If the `dimensions` parameter is not set or an empty array, the process applies the callback to all dimensions.",
    "categories": [
        "cubes"
    ],
    "parameter_order": ["data", "process", "dimensions"],
    "parameters": {
        "data": {
            "description": "A data cube.",
            "schema": {
                "type": "object",
                "format": "raster-cube"
            },
            "required": true
        },
        "process": {
            "description": "A process (callback) to be applied on each dimension. The specified process needs to accept an array as parameter and must return as many elements in the returned array as there are in the input array.",
            "schema": {
                "type": "object",
                "format": "callback",
                "properties": {
                    "data": {
                        "description": "An array with elements of any type.",
                        "type": "array",
                        "items": {
                            "description": "Any data type."
                        }
                    }
                }
            },
            "required": true
        },
        "dimensions": {
            "description": "The names of the dimensions to apply the process on. Defaults to an empty array so that all dimensions are used.\n\n**Remarks:**\n\n* The default dimensions a data cube provides are described in the collection's metadata field `cube:dimensions`.\n* There could be multiple spatial dimensions such as `x`, `y` or `z`.\n* For multi-spectral imagery there is usually a separate dimension for the bands such as `spectral`.",
            "schema": {
                "type": "array",
                "items": {
                    "type": "string"
                },
                "default": []
            }
        }
    },
    "returns": {
        "description": "A data cube with the newly computed values for the specified dimensions. The resolution, cardinality and the number of dimensions are the same as for the original data cube.",
        "schema": {
            "type": "object",
            "format": "raster-cube"
        }
    }
}