{
    "id": "mask",
    "summary": "Apply a raster mask",
    "description": "Applies a mask to a raster data cube. A mask here is a raster data cube for which parallel pixels among `data` and `mask` are compared and those pixels in `data` are replaced for which a condition in `mask` is fulfilled (see parameter `expression`).\n\nThe pixel values are replaced with the value specified for `replacement`, which defaults to `null` (no data). No data values in `data` or `mask` will be left untouched by the masking operation.",
    "categories": [
        "masks"
    ],
    "parameter_order": [
        "data",
        "mask",
        "replacement",
        "expression"
    ],
    "parameters": {
        "data": {
            "description": "A raster data cube.",
            "schema": {
                "type": "object",
                "subtype": "raster-cube"
            },
            "required": true
        },
        "mask": {
            "description": "A mask as raster data cube. Every pixel in `data` must have a parallel element in `mask`.",
            "schema": {
                "type": "object",
                "subtype": "raster-cube"
            },
            "required": true
        },
        "replacement": {
            "description": "The value used to replace masked values with.",
            "schema": {
                "type": [
                    "number",
                    "boolean",
                    "string",
                    "null"
                ]
            },
            "default": null
        },
        "expression": {
            "description": "An expression that is evaluated against each pixel in `mask`. A pixel is replaced in `data` if the expression returns `true`.\n\nThe default behaviour is that all pixels in the mask that are non-zero (for numbers) or `true` (for boolean values) get replaced in `data`. This is equivalent to the following expression: `or(gt(value, 0), eq(value, true))`.",
            "schema": [
                {
                    "title": "Default",
                    "description": "All pixels that are non-zero or `true` get replaced.",
                    "type": "null"
                },
                {
                    "title": "Condition",
                    "description": "A boolean expression that is evaluated against each pixel in the mask.",
                    "type": "object",
                    "subtype": "process-graph",
                    "parameters": {
                        "value": {
                            "description": "A value of any type could be passed."
                        }
                    }
                }
            ],
            "default": null
        }
    },
    "returns": {
        "description": "The masked raster data cube.",
        "schema": {
            "type": "object",
            "subtype": "raster-cube"
        }
    }
}