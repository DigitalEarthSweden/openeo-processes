{
    "id": "filter",
    "summary": "Filter based on a logical expression.",
    "description": "Filters the dimension values based on a logical expression so that afterwards each dimension value in the data cube conforms to the expression.",
    "categories": [
        "cubes",
        "filter"
    ],
    "parameter_order": ["data", "expression", "dimensions"],
    "parameters": {
        "data": {
            "description": "A data cube.",
            "schema": {
                "type": "object",
                "format": "raster-cube"
            },
            "required": true
        },
        "expression": {
            "description": "An expression that is evaluated against each dimension value in the data cube. For each dimension specified a parameter is passed to the expression callback with the name of the parameter being the dimension name. The data type of the parameter depends on the dimension values stored for the dimension.",
            "schema": {
                "type": "object",
                "format": "callback",
                "properties": {
                    "value": {
                        "description": "A single dimension values to compare against.",
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "string",
                                "format": "date"
                            },
                            {
                                "type": "string",
                                "format": "time"
                            }
                        ]
                    }
                }
            },
            "required": true
        },
        "dimensions": {
            "description": "The dimensions to filter on. The values for each of these dimensions will be passed to the expression with the parameter name being the dimension name.\n\n**Remarks:**\n\n* The default dimensions a data cube provides are described in the collection's metadata field `cube:dimensions`.\n* There could be multiple spatial dimensions such as `x`, `y` or `z`.\n* For multi-spectral imagery there is usually a separate dimension for the bands such as `spectral`.",
            "schema": {
                "type": "array",
                "items": {
                    "type": "string"
                }
            },
            "required": true
        }
    },
    "returns": {
        "description": "A data cube restricted by the specified expression. Therefore, the cardinality is potentially lower, but the resolution and the number of dimensions are the same as for the original data cube.",
        "schema": {
            "type": "object",
            "format": "raster-cube"
        }
    }
}